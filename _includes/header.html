<header class="site-header">
  <div class="wrapper nav-wrap">
    <a class="site-title" rel="author" href="{{ '/' | relative_url }}">{{ site.title }}</a>
    

    <!-- Bottone hamburger (solo mobile) -->
    <button class="nav-toggle" aria-label="Open menu" aria-expanded="false" aria-controls="site-menu">
      â˜°
    </button>

    <!-- Menu -->
    <nav id="site-menu" class="site-nav dropdown">
      <a class="page-link" href="{{ '/projects/' | relative_url }}">Projects</a>
      <a class="page-link" href="{{ '/blog/'     | relative_url }}">Blog</a>
      <a class="page-link" href="{{ '/cv/'       | relative_url }}">CV</a>
      <button id="theme-toggle" aria-label="Toggle dark mode">ðŸŒ™</button>
    </nav>
  </div>

  <script>
    (function () {
      var btn = document.querySelector('.nav-toggle');
      var menu = document.getElementById('site-menu');
      if (!btn || !menu) return;
      btn.addEventListener('click', function () {
        var open = menu.classList.toggle('is-open');
        btn.setAttribute('aria-expanded', open ? 'true' : 'false');
      });
      
      document.addEventListener('click', function(e){
        if (!menu.contains(e.target) && !btn.contains(e.target)) {
          menu.classList.remove('is-open');
          btn.setAttribute('aria-expanded','false');
        }
      });
    })();

    document.addEventListener("DOMContentLoaded", () => {
  const toggle = document.getElementById("theme-toggle");
  const current = localStorage.getItem("theme");

  if (current === "dark") document.documentElement.classList.add("dark");
  if (current === "light") document.documentElement.classList.add("light");

  function updateIcon() {
    if (document.documentElement.classList.contains("dark")) {
      toggle.textContent = "â˜€ï¸";
    } else {
      toggle.textContent = "ðŸŒ™";
    }
  }

  updateIcon();

  toggle.addEventListener("click", () => {
    if (document.documentElement.classList.contains("dark")) {
      document.documentElement.classList.remove("dark");
      document.documentElement.classList.add("light");
      localStorage.setItem("theme", "light");
    } else {
      document.documentElement.classList.remove("light");
      document.documentElement.classList.add("dark");
      localStorage.setItem("theme", "dark");
    }
    updateIcon();
  });
});
  </script>
</header>
